;/*FB_PKG_DELIM*/

__d("IGDRichMediaSendQueue",["WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return e==null&&(e=o("WorkerScheduler").makeScheduler("igd_web_rich_media_sends",{concurrency:1,maxTaskLimit:10})),e}l.getRichMediaSendQueue=s}),98);
__d("IGDirectAvatarStickerSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24914262484908659"}),null);
__d("IGDirectAvatarStickerSendMutation.graphql",["IGDirectAvatarStickerSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"data"},t={defaultValue:null,kind:"LocalArgument",name:"send_data"},r=[{kind:"Variable",name:"data",variableName:"data"},{kind:"Variable",name:"send_data",variableName:"send_data"}],o={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"IGDirectAvatarStickerSendMutation",selections:[{alias:null,args:r,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_avatar_sticker_send",plural:!1,selections:[o],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"IGDirectAvatarStickerSendMutation",selections:[{alias:null,args:r,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_avatar_sticker_send",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectAvatarStickerSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectAvatarStickerSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectAvatarStickerSendMutation",["IGDirectAvatarStickerSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectAvatarStickerSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDAvatarStickerPublisher",["CometRelay","IGDMAPITypes","IGDRichMediaSendQueue","IGDirectAvatarStickerSendMutation","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-avatar-sticker-publisher",process:function(a,i,l){if(a.type!=="avatar_sticker")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectAvatarStickerSendMutation")(a.commitMutationConfig);return o("IGDRichMediaSendQueue").getRichMediaSendQueue().runTask({fn:function(){return new(e||(e=n("Promise")))(function(e,n){o("CometRelay").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(l,s){if(t.onCompleted==null||t.onCompleted(l,s),s!=null)return n(r("err")("Payload error in IGDAvatarStickerPublisher: %s",s[0].message));var a=l.direct_avatar_sticker_send,u=a==null?void 0:a.message_id,c=babelHelpers.extends({},i,{authoritativeMessageId:u!=null?o("IGDMAPITypes").toMessageId(u):null,timestamp:i.timestamp});return e(c)},onError:function(o){return t.onError==null||t.onError(o),n(r("err")("Error in IGDAvatarStickerPublisher: %s",o.message))}}))})},name:"IGDAvatarStickerPublisher"})}};l.IGDAvatarStickerPublisher=s}),98);
__d("IGDMAPIQPLPoints",[],(function(t,n,r,o,a,i){"use strict";var e={AUDIO:"audio",AVATAR_STICKER:"avatar_sticker",EDIT_MESSAGE:"edit_message",FIRST_PARTY_ANIMATED_IMAGE:"first_party_animated_image",GENERIC_XMA:"generic_xma",MEDIA:"media",REACTION:"reaction",TEXT:"text",THIRD_PARTY_ANIMATED_IMAGE:"third_party_animated_image",THIRD_PARTY_GIF:"third_party_gif",THIRD_PARTY_STICKER:"third_party_sticker"},l={LS_OPTIMISTIC_WRITE_END:"ls_optimistic_write_end",LS_OPTIMISTIC_WRITE_START:"ls_optimistic_write_start",MAKE_OR_GET_MSS_END:"make_or_get_mss_end",MAKE_OR_GET_MSS_START:"make_or_get_mss_start",MEDIA_UPLOAD_END:"media_upload_end",MEDIA_UPLOAD_START:"media_upload_start",MSS_PUBLISH_END:"mss_publish_end",MSS_PUBLISH_START:"mss_publish_start",MUTATION_END:"mutation_end",MUTATION_START:"mutation_start",OPTIMISTIC_WRITE_END:"optimistic_write_end",OPTIMISTIC_WRITE_START:"optimistic_write_start"},s={LS_OPTIMISTIC_ERROR_WRITE_END:"ls_optimistic_error_write_end",LS_OPTIMISTIC_ERROR_WRITE_START:"ls_optimistic_error_write_start",MUTATION_ERROR:"mutation_error",OPTIMISTIC_ERROR_WRITE_END:"optimistic_error_write_end",OPTIMISTIC_ERROR_WRITE_START:"optimistic_error_write_start",PAYLOAD_ERROR:"payload_error",UPLOAD_ERROR:"upload_error"};i.IGDMAPIQPLSendType=e,i.IGDMAPICommonQPLPoints=l,i.IGDMAPICommonQPLErrorPoints=s}),66);
__d("IGDTextSendQueue",["WorkerScheduler","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return e==null&&(e=o("WorkerScheduler").makeScheduler("igd_web_text_sends",{concurrency:1,maxTaskLimit:10,tickFrequencyMs:r("justknobx")._("952")})),e}l.getTextSendQueue=s}),98);
__d("IGDirectEditMessageMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32480262318254796"}),null);
__d("IGDirectEditMessageMutation.graphql",["IGDirectEditMessageMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"body"},t={defaultValue:null,kind:"LocalArgument",name:"offline_threading_id"},r={defaultValue:null,kind:"LocalArgument",name:"target_item_id"},o={defaultValue:null,kind:"LocalArgument",name:"target_message_id"},a={defaultValue:null,kind:"LocalArgument",name:"thread_id"},i=[{fields:[{kind:"Variable",name:"body",variableName:"body"},{kind:"Variable",name:"target_item_id",variableName:"target_item_id"},{kind:"Variable",name:"target_message_id",variableName:"target_message_id"}],kind:"ObjectValue",name:"data"},{fields:[{kind:"Variable",name:"offline_threading_id",variableName:"offline_threading_id"},{kind:"Variable",name:"thread_id",variableName:"thread_id"}],kind:"ObjectValue",name:"send_data"}],l={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a],kind:"Fragment",metadata:null,name:"IGDirectEditMessageMutation",selections:[{alias:null,args:i,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_edit_message_with_slide_messaging_response",plural:!1,selections:[l,s],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,r,e,t,o],kind:"Operation",name:"IGDirectEditMessageMutation",selections:[{alias:null,args:i,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_edit_message_with_slide_messaging_response",plural:!1,selections:[l,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectEditMessageMutation_instagramRelayOperation"),metadata:{},name:"IGDirectEditMessageMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectEditMessageMutation",["IGDirectEditMessageMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectEditMessageMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDEditMessagePublisher",["CometRelay","IGDMAPIQPLPoints","IGDTextSendQueue","IGDirectEditMessageMutation","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-edit-message-publisher",process:function(a,i,l){if(a.type!=="edit_message")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectEditMessageMutation")(a.commitMutationConfig);return o("IGDTextSendQueue").getTextSendQueue().runTask({fn:function(){return new(e||(e=n("Promise")))(function(e,n){l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_START),o("CometRelay").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(s,u){return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),t.onCompleted==null||t.onCompleted(s,u),u!=null?(l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{error:u[0].message}}),n(r("err")("Payload error in IGDEditMessagePublisher: %s",u[0].message))):e(i)},onError:function(a){return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR),t.onError==null||t.onError(a),n(r("err")("Error in IGDEditMessagePublisher: %s",a.message))}}))})},name:"IGDEditMessagePublisher"})}};l.IGDEditMessagePublisher=s}),98);
__d("IGDirectStoreStickerSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24640017885680534"}),null);
__d("IGDirectStoreStickerSendMutation.graphql",["IGDirectStoreStickerSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"data"},{defaultValue:null,kind:"LocalArgument",name:"send_data"}],t=[{kind:"Variable",name:"data",variableName:"data"},{kind:"Variable",name:"send_data",variableName:"send_data"}],r={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"IGDirectStoreStickerSendMutation",selections:[{alias:null,args:t,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_store_sticker_send_with_slide_response",plural:!1,selections:[r,o],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"IGDirectStoreStickerSendMutation",selections:[{alias:null,args:t,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_store_sticker_send_with_slide_response",plural:!1,selections:[r,o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectStoreStickerSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectStoreStickerSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectStoreStickerSendMutation",["IGDirectStoreStickerSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectStoreStickerSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDFirstPartyAnimatedImagePublisher",["CometRelay","IGDMAPIQPLPoints","IGDMAPITypes","IGDRichMediaSendQueue","IGDirectStoreStickerSendMutation","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-first-party-animated-image-publisher",process:function(a,i,l){if(a.type!=="first_party_animated_image")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectStoreStickerSendMutation")(a.commitMutationConfig);return o("IGDRichMediaSendQueue").getRichMediaSendQueue().runTask({fn:function(){return new(e||(e=n("Promise")))(function(e,n){l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_START),o("CometRelay").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(s,u){if(l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),t.onCompleted==null||t.onCompleted(s,u),u!=null)return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{error:u[0].message}}),n(r("err")("Payload error in IGDStickerPublisher: %s",u[0].message));var a=s.direct_store_sticker_send_with_slide_response,c=a==null?void 0:a.message_id,d=a==null?void 0:a.timestamp_ms,m=babelHelpers.extends({},i,{authoritativeMessageId:c!=null?o("IGDMAPITypes").toMessageId(c):null,timestamp:d!=null?o("IGDMAPITypes").toTimestamp(parseInt(d,10)):i.timestamp});return e(m)},onError:function(a){return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR),t.onError==null||t.onError(a),n(r("err")("Error in IGDStickerPublisher: %s",a.message))}}))})},name:"IGDFirstPartyAnimatedImagePublisher"})}};l.IGDFirstPartyAnimatedImagePublisher=s}),98);
__d("IGDirectGenericXMAShareMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25056930583969517"}),null);
__d("IGDirectGenericXMAShareMutation.graphql",["IGDirectGenericXMAShareMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"data"},t={defaultValue:null,kind:"LocalArgument",name:"send_data"},r=[{kind:"Variable",name:"data",variableName:"data"},{kind:"Variable",name:"send_data",variableName:"send_data"}],o={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"IGDirectGenericXMAShareMutation",selections:[{alias:null,args:r,concreteType:"SlideMessage",kind:"LinkedField",name:"ig_direct_generic_xma_share_with_unified_params",plural:!1,selections:[o],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"IGDirectGenericXMAShareMutation",selections:[{alias:null,args:r,concreteType:"SlideMessage",kind:"LinkedField",name:"ig_direct_generic_xma_share_with_unified_params",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectGenericXMAShareMutation_instagramRelayOperation"),metadata:{},name:"IGDirectGenericXMAShareMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectGenericXMAShareMutation",["IGDirectGenericXMAShareMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectGenericXMAShareMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDGenericXMAPublisher",["CometRelay","IGDMAPIQPLPoints","IGDMAPITypes","IGDRichMediaSendQueue","IGDirectGenericXMAShareMutation","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-generic-xma-publisher",process:function(a,i,l){if(a.type!=="generic_xma")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectGenericXMAShareMutation")(a.commitMutationConfig);return o("IGDRichMediaSendQueue").getRichMediaSendQueue().runTask({fn:function(){return new(e||(e=n("Promise")))(function(e,n){l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_START),o("CometRelay").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(s,u){if(l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),t.onCompleted==null||t.onCompleted(s,u),u!=null)return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{error:u[0].message}}),n(r("err")("Payload error in IGDGenericXMAPublisher: %s",u[0].message));var a=s.ig_direct_generic_xma_share_with_unified_params,c=a==null?void 0:a.message_id,d=babelHelpers.extends({},i,{authoritativeMessageId:c!=null?o("IGDMAPITypes").toMessageId(c):null,timestamp:i.timestamp});return e(d)},onError:function(a){return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR),t.onError==null||t.onError(a),n(r("err")("Error in IGDGenericXMAPublisher: %s",a.message))}}))})},name:"IGDGenericXMAPublisher"})}};l.IGDGenericXMAPublisher=s}),98);
__d("IGDMediaSendQueue",["WorkerScheduler","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=r("justknobx")._("99"),u=r("justknobx")._("480");function c(){return e==null&&(e=o("WorkerScheduler").makeScheduler("igd_web_media_sends",{concurrency:s,maxTaskLimit:u})),e}l.getMediaSendQueue=c}),98);
__d("IGDirectMediaSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25604816565789936"}),null);
__d("IGDirectMediaSendMutation.graphql",["IGDirectMediaSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"attachment_fbid"},t={defaultValue:null,kind:"LocalArgument",name:"offline_threading_id"},r={defaultValue:null,kind:"LocalArgument",name:"reply_to_message_id"},o={defaultValue:null,kind:"LocalArgument",name:"thread_id"},a=[{fields:[{kind:"Variable",name:"attachment_fbid",variableName:"attachment_fbid"},{kind:"Variable",name:"reply_to_message_id",variableName:"reply_to_message_id"}],kind:"ObjectValue",name:"media_data"},{fields:[{kind:"Variable",name:"offline_threading_id",variableName:"offline_threading_id"},{kind:"Variable",name:"thread_id",variableName:"thread_id"}],kind:"ObjectValue",name:"send_data"}],i={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"IGDirectMediaSendMutation",selections:[{alias:null,args:a,concreteType:"SlideMessage",kind:"LinkedField",name:"xig_direct_media_send_with_slide_messaging_response",plural:!1,selections:[i,l],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,o,t,r],kind:"Operation",name:"IGDirectMediaSendMutation",selections:[{alias:null,args:a,concreteType:"SlideMessage",kind:"LinkedField",name:"xig_direct_media_send_with_slide_messaging_response",plural:!1,selections:[i,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectMediaSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectMediaSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectMediaSendMutation",["IGDirectMediaSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectMediaSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("WmiMediaStagingTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return t},l=function(t){return t};i.toOfflineAttachmentFbid=e,i.toFileName=l}),66);
__d("WmiMediaUpload",["FileMercuryUploadService","MWPAttachmentUploadQplFlow","WACustomError","WAPromiseTimeout","WAResolvable","WAResultOrError","WmiMediaStagingTypes","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("763");async function s(e){var t=e.amplitudes,n=e.entryPoint,a=e.file,i=e.platform,l=e.sampling_freq,s=new(o("WAResolvable")).Resolvable,u=r("uuidv4")(),c=o("MWPAttachmentUploadQplFlow").createAttachmentUploadIdToQplFlowMap([{attachmentType:"audio",entryPoint:n,fileSize:a.size,platform:i,uploadId:u}]);return await o("FileMercuryUploadService").uploadByMercuryUploadService({chatSupportUserId:null,files:[a],isChatSupportUser:!1,isVoiceClip:!0,onUploadFailure:function(){s.resolve(o("WAResultOrError").makeError("upload-error"))},onUploadProgress:void 0,onUploadSuccess:function(t,n){if(n==null||n.length===0){s.resolve(o("WAResultOrError").makeError("null-fbid"));return}s.resolve(o("WAResultOrError").makeResult(n))},uploadIDs:[u],uploadIdToQplFlow:c,voiceClipWaveformData:{amplitudes:t,sampling_freq:l}}),d(s.promise)}function u(e){var t=e.files,n=e.getMediaStaging,r=e.mediaStagings,a=e.onUploadFailureCallback,i=e.removeMediaStaging,l=e.updatedMediaStaging,s=new Map(r.map(function(e){return e.uploadQplFlow.addPoint("upload_start"),[e.offlineAttachmentId,e.uploadQplFlow]}));return o("FileMercuryUploadService").uploadByMercuryUploadService({chatSupportUserId:null,files:t,isChatSupportUser:!1,onUploadFailure:function(t){var e,r=(e=n(o("WmiMediaStagingTypes").toOfflineAttachmentFbid(t)))==null?void 0:e.fbidResolvable;r!=null&&(a!=null&&a(),r.resolve(o("WAResultOrError").makeError("upload-error")),i(o("WmiMediaStagingTypes").toOfflineAttachmentFbid(t)))},onUploadProgress:function(t,n){var e=n.event;if(e.lengthComputable){var r=e.loaded/e.total;l(o("WmiMediaStagingTypes").toOfflineAttachmentFbid(t),{progress:r})}},onUploadSuccess:function(t,r){var e,a=(e=n(o("WmiMediaStagingTypes").toOfflineAttachmentFbid(t)))==null?void 0:e.fbidResolvable;a!=null&&(r==null?a.resolve(o("WAResultOrError").makeError("null-fbid")):a.resolve(o("WAResultOrError").makeResult(r)))},uploadIDs:r.map(function(e){return e.offlineAttachmentId}),uploadIdToQplFlow:s})}function c(e){return e.uploadQplFlow.addPoint("media_published"),d(e.fbidResolvable.promise)}function d(t){return o("WAPromiseTimeout").promiseTimeout(t,e).catch(function(e){return e instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("timeout"):o("WAResultOrError").makeError("internal-error")})}l.wmiUploadVoiceClip=s,l.wmiUploadStagedMedia=u,l.wmiUploadMediaStagingResultWithTimeout=c}),98);
__d("IGDMediaPublisher",["CometRelay","IGDMAPIInterfaceTypes","IGDMAPIQPLPoints","IGDMAPITypes","IGDMediaSendQueue","IGDirectMediaSendMutation","WAResultOrError","WmiMediaUpload","err"],(function(t,n,r,o,a,i,l){"use strict";var e={name:"igd-media-publisher",process:function(t,n,r){return t.type!=="media"&&t.type!=="audio"?Promise.resolve(n):o("IGDMediaSendQueue").getMediaSendQueue().runTask({fn:function(){return s(t,n,r)},name:"IGDMediaPublisher"})}};function s(e,t,n){return new Promise(async function(a,i){n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MEDIA_UPLOAD_START);var l=e.type==="media"?await o("WmiMediaUpload").wmiUploadMediaStagingResultWithTimeout(e.mediaStaging).catch(function(e){return n.addAnnotations({string:{upload_error_message:e.message}}),o("WAResultOrError").makeError("internal-error")}):await o("WmiMediaUpload").wmiUploadVoiceClip({amplitudes:e.amplitudes,entryPoint:"IGDOffMsysComposer",file:e.file,platform:"igd",sampling_freq:e.sampling_freq});if(l.success===!1)return n.addAnnotations({string:{upload_error:l.error}}),n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.UPLOAD_ERROR),i(l.error);n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MEDIA_UPLOAD_END);var s=babelHelpers.extends({},e.commitMutationConfig,{variables:babelHelpers.extends({},e.commitMutationConfig.variables,{attachment_fbid:l.value})}),u=r("IGDirectMediaSendMutation")(s);return o("CometRelay").commitMutation(t.environment,babelHelpers.extends({},u,{onCompleted:function(l,s){var e,u;if(n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),s!=null)return n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{error:s[0].message}}),i(r("err")("Payload error in IGDMediaPublisher: %s",s[0].message));var c=l==null||(e=l.xig_direct_media_send_with_slide_messaging_response)==null?void 0:e.message_id,d=l==null||(u=l.xig_direct_media_send_with_slide_messaging_response)==null?void 0:u.timestamp_ms,m=babelHelpers.extends({},t,{authoritativeMessageId:c!=null?o("IGDMAPIInterfaceTypes").toMessageId(c):null,timestamp:d!=null?o("IGDMAPITypes").toTimestamp(parseInt(d,10)):t.timestamp});return a(m)},onError:function(t){return n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR),i(r("err")("Error in IGDMediaPublisher: %s",t.message))}}))})}l.IGDMediaPublisher=e}),98);
__d("IGDPostProcessor",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l={name:"igd-postprocessor",process:function(r,o,a){return(e||(e=n("Promise"))).resolve(o)}};i.IGDPostProcessor=l}),66);
__d("IGDPreProcessor",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l={name:"igd-preprocessor",process:function(r,o,a){if(window.navigator.onLine===!1){var t;a.addAnnotations({bool:{offline:!0}}),(t=o.s2sFlow)==null||t.addPoint("network_connection_offline")}else{var i;(i=o.s2sFlow)==null||i.addPoint("network_connection_online")}return(e||(e=n("Promise"))).resolve(o)}};i.IGDPreProcessor=l}),66);
__d("IGDirectReactionSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24374451552236906"}),null);
__d("IGDirectReactionSendMutation.graphql",["IGDirectReactionSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"request",variableName:"input"}],r={alias:null,args:null,concreteType:"XFBSlideReaction",kind:"LinkedField",name:"reactions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reaction_timestamp_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_fbid",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"IGDirectReactionSendMutation",selections:[{alias:null,args:t,concreteType:"XIGIGDirectReactionResponse",kind:"LinkedField",name:"xig_direct_reaction_send_with_slide_messaging_response",plural:!1,selections:[{alias:null,args:null,concreteType:"SlideMessage",kind:"LinkedField",name:"slide_message",plural:!1,selections:[r],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"IGDirectReactionSendMutation",selections:[{alias:null,args:t,concreteType:"XIGIGDirectReactionResponse",kind:"LinkedField",name:"xig_direct_reaction_send_with_slide_messaging_response",plural:!1,selections:[{alias:null,args:null,concreteType:"SlideMessage",kind:"LinkedField",name:"slide_message",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("IGDirectReactionSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectReactionSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectReactionSendMutation",["IGDirectReactionSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectReactionSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDReactionPublisher",["IGDirectReactionSendMutation","Promise","err","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-reaction-publisher",process:function(a,i,l){if(a.type!=="reaction")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectReactionSendMutation")(a.commitMutationConfig);return new(e||(e=n("Promise")))(function(e,n){o("relay-runtime").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(o,a){return a!=null?n(r("err")("Payload error in IGDReactionPublisher: %s",a[0].message)):e(i)},onError:function(t){return n(r("err")("Error in IGDReactionPublisher: %s",t.message))}}))})}};l.IGDReactionPublisher=s}),98);
__d("IGDirectTextSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25288447354146606"}),null);
__d("IGDirectTextSendMutation.graphql",["IGDirectTextSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"commands"},t={defaultValue:null,kind:"LocalArgument",name:"ig_thread_igid"},r={defaultValue:null,kind:"LocalArgument",name:"mentioned_user_ids"},o={defaultValue:null,kind:"LocalArgument",name:"mentions"},a={defaultValue:null,kind:"LocalArgument",name:"offline_threading_id"},i={defaultValue:null,kind:"LocalArgument",name:"recipient_igids"},l={defaultValue:null,kind:"LocalArgument",name:"replied_to_client_context"},s={defaultValue:null,kind:"LocalArgument",name:"replied_to_item_id"},u={defaultValue:null,kind:"LocalArgument",name:"reply_to_message_id"},c={defaultValue:null,kind:"LocalArgument",name:"sampled"},d={defaultValue:null,kind:"LocalArgument",name:"text"},m=[{fields:[{kind:"Variable",name:"commands",variableName:"commands"},{kind:"Variable",name:"ig_thread_igid",variableName:"ig_thread_igid"},{kind:"Variable",name:"mentioned_user_ids",variableName:"mentioned_user_ids"},{kind:"Variable",name:"mentions",variableName:"mentions"},{kind:"Variable",name:"offline_threading_id",variableName:"offline_threading_id"},{kind:"Variable",name:"recipient_igids",variableName:"recipient_igids"},{kind:"Variable",name:"replied_to_client_context",variableName:"replied_to_client_context"},{kind:"Variable",name:"replied_to_item_id",variableName:"replied_to_item_id"},{kind:"Variable",name:"reply_to_message_id",variableName:"reply_to_message_id"},{kind:"Variable",name:"sampled",variableName:"sampled"},{kind:"Variable",name:"text",variableName:"text"}],kind:"ObjectValue",name:"data"}],p={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l,s,u,c,d],kind:"Fragment",metadata:null,name:"IGDirectTextSendMutation",selections:[{alias:null,args:m,concreteType:"SlideMessage",kind:"LinkedField",name:"xig_direct_text_send_with_slide_messaging_response",plural:!1,selections:[p,_],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,a,i,l,s,u,c,d,o,r,e],kind:"Operation",name:"IGDirectTextSendMutation",selections:[{alias:null,args:m,concreteType:"SlideMessage",kind:"LinkedField",name:"xig_direct_text_send_with_slide_messaging_response",plural:!1,selections:[p,_,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectTextSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectTextSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectTextSendMutation",["IGDirectTextSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectTextSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDTextPublisher",["CometRelay","IGDMAPIQPLPoints","IGDMAPITypes","IGDMqttWebDeviceID","IGDTextSendQueue","IGDirectTextSendMutation","MqttBypassDGWClient","err","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={name:"igd-text-publisher",process:function(t,n,a){if(t.type!=="text")return Promise.resolve(n);var e=r("IGDirectTextSendMutation")(t.commitMutationConfig);return o("IGDTextSendQueue").getTextSendQueue().runTask({fn:async function(){var t;if((t=n.s2sFlow)==null||t.addPoint("sending_message_impl"),r("justknobx")._("3057"))try{var o=await s(e,n,a);return o}catch(t){return u(e,n,a)}else return u(e,n,a)},name:"IGDTextPublisher"})}};async function s(e,t,n){try{var o=t.s2sFlow,a={action:"send_item",client_context:t.offlineThreadingId,commands:e.variables.commands,device_id:r("IGDMqttWebDeviceID").clientId,item_type:"text",mentioned_user_ids:e.variables.mentioned_user_ids,mentions:e.variables.mentions,mutation_token:t.offlineThreadingId,reply_to_message_id:e.variables.reply_to_message_id,text:e.variables.text.sensitive_string_value,thread_id:e.variables.ig_thread_igid},i=r("MqttBypassDGWClient").getInstance();o==null||o.addPoint("sending_message_via_realtime");var l=await i.send("/ig_send_message",new TextEncoder().encode(JSON.stringify(a)));if(!l)throw o==null||o.addPoint("send_message_server_error"),r("err")("Failed to publish via realtime");return t}catch(e){throw r("err")("Error in IGDTextPublisher MQTT: %s",r("getErrorSafe")(e).message)}}function u(e,t,n){var a=t.s2sFlow;return n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_START),a==null||a.addPoint("sending_message_via_http"),new Promise(function(i,l){o("CometRelay").commitMutation(t.environment,babelHelpers.extends({},e,{onCompleted:function(u,c){if(n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),e.onCompleted==null||e.onCompleted(u,c),c!=null){var s,d,m,p,_,f=c,g=f[0];return n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{code:(s=(d=g.code)==null?void 0:d.toString())!=null?s:null,error:g.message},string_array:{mids:(m=g.mids)!=null?m:null,stack_trace:(p=(_=g.exception)==null?void 0:_.stack_trace)!=null?p:null}}),a==null||a.addPoint("send_message_server_error"),l(r("err")("Payload error in IGDTextPublisher: %s",c[0].message))}a==null||a.addPoint("received_successful_server_ack");var h=u.xig_direct_text_send_with_slide_messaging_response,y=h==null?void 0:h.message_id,C=h==null?void 0:h.timestamp_ms,b=babelHelpers.extends({},t,{authoritativeMessageId:y!=null?o("IGDMAPITypes").toMessageId(y):null,timestamp:C!=null?o("IGDMAPITypes").toTimestamp(parseInt(C,10)):t.timestamp});return i(b)},onError:function(i){var t,s,u;return n.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR,{string:{code:(t=(s=i.code)==null?void 0:s.toString())!=null?t:null,error:i.message},string_array:{mids:(u=i==null?void 0:i.mids)!=null?u:null}}),a==null||a.addPoint("send_message_server_error"),e.onError==null||e.onError(i),l(r("err")("Error in IGDTextPublisher: %s",i.message))}}))})}l.IGDTextPublisher=e,l.publishViaRealtime=s}),98);
__d("IGDirectAnimatedMediaSendMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32089613413987432"}),null);
__d("IGDirectAnimatedMediaSendMutation.graphql",["IGDirectAnimatedMediaSendMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"data"},{defaultValue:null,kind:"LocalArgument",name:"send_data"}],t=[{kind:"Variable",name:"data",variableName:"data"},{kind:"Variable",name:"send_data",variableName:"send_data"}],r={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"IGDirectAnimatedMediaSendMutation",selections:[{alias:null,args:t,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_animated_media_send",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"IGDirectAnimatedMediaSendMutation",selections:[{alias:null,args:t,concreteType:"SlideMessage",kind:"LinkedField",name:"direct_animated_media_send",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("IGDirectAnimatedMediaSendMutation_instagramRelayOperation"),metadata:{},name:"IGDirectAnimatedMediaSendMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("IGDirectAnimatedMediaSendMutation",["IGDirectAnimatedMediaSendMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("IGDirectAnimatedMediaSendMutation.graphql");function u(e){return babelHelpers.extends({},e,{mutation:s})}l.default=u}),98);
__d("IGDThirdPartyAnimatedImagePublisher",["CometRelay","IGDMAPIQPLPoints","IGDMAPITypes","IGDRichMediaSendQueue","IGDirectAnimatedMediaSendMutation","Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={name:"igd-third-party-animated-image-publisher",process:function(a,i,l){if(a.type!=="third_party_animated_image")return(e||(e=n("Promise"))).resolve(i);var t=r("IGDirectAnimatedMediaSendMutation")(a.commitMutationConfig);return o("IGDRichMediaSendQueue").getRichMediaSendQueue().runTask({fn:function(){return new(e||(e=n("Promise")))(function(e,n){l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_START),o("CometRelay").commitMutation(i.environment,babelHelpers.extends({},t,{onCompleted:function(s,u){if(l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLPoints.MUTATION_END),t.onCompleted==null||t.onCompleted(s,u),u!=null)return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.PAYLOAD_ERROR,{string:{error:u[0].message}}),n(r("err")("Payload error in IGDThirdPartyAnimatedImagePublisher: %s",u[0].message));var a=s.direct_animated_media_send,c=a==null?void 0:a.message_id,d=babelHelpers.extends({},i,{authoritativeMessageId:c!=null?o("IGDMAPITypes").toMessageId(c):null,timestamp:i.timestamp});return e(d)},onError:function(a){return l.addPoint(o("IGDMAPIQPLPoints").IGDMAPICommonQPLErrorPoints.MUTATION_ERROR),t.onError==null||t.onError(a),n(r("err")("Error in IGDThirdPartyAnimatedImagePublisher: %s",a.message))}}))})},name:"IGDThirdPartyAnimatedImagePublisher"})}};l.IGDThirdPartyAnimatedImagePublisher=s}),98);
__d("IGDMessageSendService",["IGDAvatarStickerPublisher","IGDEditMessagePublisher","IGDFirstPartyAnimatedImagePublisher","IGDGenericXMAPublisher","IGDMediaPublisher","IGDPostProcessor","IGDPreProcessor","IGDReactionPublisher","IGDTextPublisher","IGDThirdPartyAnimatedImagePublisher","WATagsLogger","WmiMessageSendService"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=function(){};function u(){return e==null&&(o("WATagsLogger").initializeWaLogger({count:s,debug:s,devConsole:s,error:s,info:s,logRestricted:s,warn:s}),e=new(o("WmiMessageSendService")).MessageSendService({pipeline:[o("IGDPreProcessor").IGDPreProcessor,o("IGDTextPublisher").IGDTextPublisher,o("IGDMediaPublisher").IGDMediaPublisher,o("IGDFirstPartyAnimatedImagePublisher").IGDFirstPartyAnimatedImagePublisher,o("IGDThirdPartyAnimatedImagePublisher").IGDThirdPartyAnimatedImagePublisher,o("IGDGenericXMAPublisher").IGDGenericXMAPublisher,o("IGDAvatarStickerPublisher").IGDAvatarStickerPublisher,o("IGDEditMessagePublisher").IGDEditMessagePublisher,o("IGDReactionPublisher").IGDReactionPublisher,o("IGDPostProcessor").IGDPostProcessor],postSendPipeline:[]})),e}l.makeMessagePublishService=u}),98);
__d("createIGDMessageSendContext",["IGDMAPITypes","IGDOfflineThreadingID","WAHashStringToNumber","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("WATimeUtils").millisTime(),a=o("IGDMAPITypes").toTimestamp(r),i=n!=null?n:o("IGDMAPITypes").toOfflineThreadingId(o("IGDOfflineThreadingID").generateOfflineThreadingID(r)),l="mid.$"+i;return{authoritativeMessageId:t,environment:e,instanceKey:o("IGDMAPITypes").toInstanceKey(o("WAHashStringToNumber").hashStringToNumber(l)),offlineThreadingId:i,optimisticMessageId:o("IGDMAPITypes").toOptimisticMessageId(l),s2sFlow:null,s2sInstanceKey:o("IGDMAPITypes").toInstanceKey(o("WAHashStringToNumber").hashStringToNumber(i)),timestamp:a}}l.default=e}),98);