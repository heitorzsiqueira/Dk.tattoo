;/*FB_PKG_DELIM*/

__d("PolarisClipsItemModal_clips.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"PolarisClipsItemModal_clips",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null}],storageKey:null}],type:"XDTClipsItemDict",abstractKey:null};a.exports=e}),null);
__d("PolarisClipsItemModal.next.react",["CometRelay","IGRouter_DO_NOT_USE.react","PolarisClipsItemModal_clips.graphql","PolarisLinkBuilder","PolarisPost.react","PolarisPostActionLoadPost","PolarisPostModal.react","PolarisPostVariants","PolarisReactRedux.react","nullthrows","polarisPostSelectors","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef;function p(e,t){var n=null;return e!=null&&e.forEach(function(e){var r;((r=e.media)==null?void 0:r.pk)===t&&(n=e)}),n}function _(e){var t,n;if(((t=e.media)==null?void 0:t.original_height)!=null&&((n=e.media)==null?void 0:n.original_width)!=null){var r,o;return{height:(r=e.media)==null?void 0:r.original_height,width:(o=e.media)==null?void 0:o.original_width}}}function f(e,t,n){var a,i,l,s,u=o("react-compiler-runtime").c(28),c;if(u[0]===Symbol.for("react.memo_cache_sentinel")){var p;c=(p=r("qex")._("948"))!=null?p:0,u[0]=c}else c=u[0];var _=c,f=e.findIndex(function(e){var n;return((n=e.media)==null?void 0:n.pk)===t}),g=f>=0&&f<e.length-1?e[f+1]:null,h=f>=0&&f<e.length-2?e[f+2]:null,y=g==null||(a=g.media)==null?void 0:a.code,C=g==null||(i=g.media)==null?void 0:i.pk,b=h==null||(l=h.media)==null?void 0:l.code,v=h==null||(s=h.media)==null?void 0:s.pk,S;u[1]===Symbol.for("react.memo_cache_sentinel")?(S=new Set,u[1]=S):S=u[1];var R=m(S),L=o("PolarisReactRedux.react").useDispatch(),E;u[2]!==n?(E=function(t){return n!=null&&n!==""?o("polarisPostSelectors").getIsPostDataFetched(t,n):!1},u[2]=n,u[3]=E):E=u[3];var k=o("PolarisReactRedux.react").useSelector(E),I;u[4]!==y?(I=function(t){return y!=null?o("polarisPostSelectors").getIsPostDataFetched(t,y):!0},u[4]=y,u[5]=I):I=u[5];var T=o("PolarisReactRedux.react").useSelector(I),D;u[6]!==b?(D=function(t){return b!=null?o("polarisPostSelectors").getIsPostDataFetched(t,b):!0},u[6]=b,u[7]=D):D=u[7];var x=o("PolarisReactRedux.react").useSelector(D),$,P;u[8]!==T||u[9]!==x||u[10]!==y||u[11]!==b?($=function(){T&&y!=null&&R.current.delete(y),x&&b!=null&&R.current.delete(b)},P=[T,x,y,b],u[8]=T,u[9]=x,u[10]=y,u[11]=b,u[12]=$,u[13]=P):($=u[12],P=u[13]),d($,P);var N,M;u[14]!==L||u[15]!==k||u[16]!==T||u[17]!==y||u[18]!==C?(N=function(){_>=1&&k&&!T&&y!=null&&C!=null&&!R.current.has(y)&&(R.current.add(y),L(o("PolarisPostActionLoadPost").loadPost(y,C)))},M=[_,k,T,y,C,L],u[14]=L,u[15]=k,u[16]=T,u[17]=y,u[18]=C,u[19]=N,u[20]=M):(N=u[19],M=u[20]),d(N,M);var w,A;u[21]!==L||u[22]!==T||u[23]!==x||u[24]!==b||u[25]!==v?(A=function(){_>=2&&T&&!x&&b!=null&&v!=null&&!R.current.has(b)&&(R.current.add(b),L(o("PolarisPostActionLoadPost").loadPost(b,v)))},w=[_,T,x,b,v,L],u[21]=L,u[22]=T,u[23]=x,u[24]=b,u[25]=v,u[26]=w,u[27]=A):(w=u[26],A=u[27]),d(A,w)}function g(t){var a,i,l=t.analyticsContext,s=t.clipFragmentsKey,c=t.history,d=t.onClose,g=t.onOpen,h=t.postId,y=o("CometRelay").useFragment(e!==void 0?e:e=n("PolarisClipsItemModal_clips.graphql"),s),C=m(c.location.pathname),b=p(y,h);if(f(y,h,b==null||(a=b.media)==null?void 0:a.code),!b)return null;var v=y.map(function(e){var t;return r("nullthrows")((t=e.media)==null?void 0:t.pk)});return u.jsx(r("PolarisPostModal.react"),{analyticsContext:l,combinedPostIds:v,dimensions:_(b),mediaLinkBuilder:o("PolarisLinkBuilder").buildClipsMediaLink,modalEntryPath:C.current,onClose:d,onOpen:g,postCode:r("nullthrows")((i=b.media)==null?void 0:i.code),postId:h,children:u.jsx(r("PolarisPost.react"),{analyticsContext:l+"Modal",autoplay:!0,id:h,isVisible:!0,variant:o("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}g.displayName=g.name+" [from "+i.id+"]";var h=o("IGRouter_DO_NOT_USE.react").withIGRouter(g);l.default=h}),98);